对于 assert 这个宏定义来说，由于我们常常会在 assert 后加上 ; 作为语句的结束，因此在定义宏的时候不会加上 ; 号

这时在

```cpp
#define assert(e) if (!e) assert_error(__FILE__,__LINE__)

if (x > 0 && y > 0) 
    assert(x > y); 
else 
    assert(y > x);

// 展开后变为 
if (x > 0 && y > 0) 
    if(!(x > y)) 
        assert_error("foo.c", 37); 
    else 
        if(!(y > x)) 
            assert_error("foo.c", 39);

此时若将宏定义转变为

#define assert(e) \                                               { if (!e) assert_error(__FILE__,__LINE__); }

// 这样展开后也会有问题
if (x > 0 && y > 0) { 
    if(!(x > y)) 
        assert_error("foo.c", 37);
}; 
else { 
    if(!(y > x)) 
        assert_error("foo.c", 39);
    };
```


libc 的头文件

```cpp 
assert.h
# if defined __cplusplus
#  if defined __has_builtin
#   if __has_builtin (__builtin_FILE)
#    define __ASSERT_FILE __builtin_FILE ()
#    define __ASSERT_LINE __builtin_LINE ()
#   endif
#  endif
#  if !defined __ASSERT_FILE
#   define __ASSERT_FILE __FILE__
#   define __ASSERT_LINE __LINE__
#  endif
#  define assert(expr)                                                  \
     (static_cast <bool> (expr)                                         \
      ? void (0)                                                        \
      : __assert_fail (#expr, __ASSERT_FILE, __ASSERT_LINE,             \
                       __ASSERT_FUNCTION))
# elif !defined __GNUC__ || defined __STRICT_ANSI__
#  define assert(expr)                                                  \
    ((expr)                                                             \
     ? __ASSERT_VOID_CAST (0)                                           \
     : __assert_fail (#expr, __FILE__, __LINE__, __ASSERT_FUNCTION))

```